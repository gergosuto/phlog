<div class="slideshow-container">
	{{ range .Resources.Match "images/*.jpeg" }}
    <div class="mySlides fade">
		  <img src="{{ .RelPermalink }}">
	  </div>
  {{ end }}

	<div class="thumbnail-row">
	  {{ range $index, $image := .Resources.Match "images/*.jpeg" }}
			{{ $image := $image.Process "fill 72x72" }}
		  <div class="thumbnail" onclick="currentSlide({{ add $index 1 }})">
		    <img src="{{ $image.RelPermalink }}">
		  </div>
	  {{ end }}
	</div>

	<style>
	/* Slideshow container */
	.slideshow-container {
	  position: relative;
	  margin: auto;
	  max-width: 100%;
	}
	.mySlides {
	  display: none;
	}
	.mySlides img {
	  vertical-align: middle;
		margin: 0 auto;
		max-width: 400px;
		max-height: 400px;
	}

	/* Thumbnail row */
	.thumbnail-row {
	  display: flex;
	  justify-content: center;
	  margin-top: 15px;
	}
	.thumbnail {
	  cursor: pointer;
	  margin: 5px;
	  overflow: hidden;
	  border: 2px solid transparent;
	  transition: 0.3s;
		opacity: 0.6;
	}
	.thumbnail:hover {
	  border: 2px solid #ddd;
	}
	.thumbnail img {
	  display: block;
	}

	/* Active thumbnail styling */
	.thumbnail.active {
	  border: 2px solid #666;
		opacity: 1;
	}
	</style>

	<script>
	let slideIndex = 1;
	showSlides(slideIndex);

	// Thumbnail image controls
	function currentSlide(n) {
	  showSlides(slideIndex = n);
	}

	function showSlides(n) {
	  let i;
	  let slides = document.getElementsByClassName("mySlides");
	  let thumbnails = document.getElementsByClassName("thumbnail");

	  if (n > slides.length) { slideIndex = 1 }
	  if (n < 1) { slideIndex = slides.length }

	  // Hide all slides
	  for (i = 0; i < slides.length; i++) {
	    slides[i].style.display = "none";
	  }

	  // Remove active class from all thumbnails
	  for (i = 0; i < thumbnails.length; i++) {
	    thumbnails[i].classList.remove("active");
	  }

	  // Show the selected slide and highlight the corresponding thumbnail
	  slides[slideIndex - 1].style.display = "flex";
	  thumbnails[slideIndex - 1].classList.add("active");
	}
	</script>
